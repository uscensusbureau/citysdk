{"version":3,"sources":["oops/config.cljs"],"sourcesContent":["(ns oops.config\n  \"Code supporting dynamic (run-time) configuration. See runtime-prefixed keys in config map in defaults.clj.\"\n  (:require-macros [oops.config :refer [gen-runtime-config]]))\n\n(defn get-initial-runtime-config []\n  (gen-runtime-config))\n\n; use oops.config/get-current-runtime-config to get currently effective config\n(def ^:dynamic *runtime-config* (get-initial-runtime-config))\n\n; -- public api -------------------------------------------------------------------------------------------------------------\n\n(defn set-current-runtime-config! [new-config]\n  {:pre [(map? new-config)]}\n  (set! *runtime-config* new-config)\n  new-config)\n\n(defn get-current-runtime-config []\n  *runtime-config*)\n\n(defn update-current-runtime-config! [f-or-map & args]\n  (if (map? f-or-map)\n    (update-current-runtime-config! merge f-or-map)\n    (set-current-runtime-config! (apply f-or-map (get-current-runtime-config) args))))\n\n; -- icing ------------------------------------------------------------------------------------------------------------------\n\n(defn get-config-key [key & [config]]\n  (key (or config (get-current-runtime-config))))\n\n(defn ^boolean has-config-key? [key & [config]]\n  (not= ::not-found (get (or config (get-current-runtime-config)) key ::not-found)))\n\n(defn get-error-reporting [& [config]]\n  (get-config-key :error-reporting config))\n\n(defn get-warning-reporting [& [config]]\n  (get-config-key :warning-reporting config))\n\n(defn get-suppress-reporting [& [config]]\n  (get-config-key :suppress-reporting config))\n\n(defn get-child-factory [& [config]]\n  (get-config-key :child-factory config))\n\n(defn set-child-factory! [new-factory-fn]\n  (update-current-runtime-config! {:child-factory new-factory-fn}))\n\n(defn ^boolean throw-errors-from-macro-call-sites? [& [config]]\n  (true? (get-config-key :throw-errors-from-macro-call-sites config)))\n\n(defn ^boolean use-envelope? [& [config]]\n  (true? (get-config-key :use-envelope config)))\n"],"mappings":"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","names":["oops.config/get-initial-runtime-config","oops.config/*runtime-config*","js/Error","oops.config/set-current-runtime-config!","cljs.core/map?","new-config","oops.config/get-current-runtime-config","i__4642__auto__","len__4641__auto__","args__4647__auto__","cljs.core/IndexedSeq","oops.config/update-current-runtime-config!","argseq__4648__auto__","cljs.core/first","seq24041","cljs.core/next","self__4628__auto__","G__24042","f-or-map","oops.config.update_current_runtime_config_BANG_.cljs$core$IFn$_invoke$arity$variadic","cljs.core/merge","cljs.core.apply.cljs$core$IFn$_invoke$arity$3","args","oops.config/get-config-key","p__24055","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","vec__24058","seq24050","G__24051","G__24061","key","or__4047__auto__","config","oops.config/has-config-key?","p__24064","vec__24065","seq24062","G__24063","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core.get.cljs$core$IFn$_invoke$arity$3","oops.config/get-error-reporting","p__24073","vec__24074","self__4629__auto__","cljs.core/seq","seq24068","oops.config.get_config_key.cljs$core$IFn$_invoke$arity$variadic","oops.config/get-warning-reporting","p__24082","vec__24083","seq24080","oops.config/get-suppress-reporting","p__24087","vec__24088","seq24086","oops.config/get-child-factory","p__24092","vec__24093","seq24091","oops.config/set-child-factory!","new-factory-fn","oops.config/throw-errors-from-macro-call-sites?","p__24097","vec__24098","seq24096","oops.config/use-envelope?","p__24111","vec__24112","seq24109"]}